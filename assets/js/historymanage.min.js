function UrlReplace(){var docUrl=document.URL,ver=getUrlVars(docUrl).ver,matchVer=getUrlVars(docUrl).matchVer,crv=getUrlVars(docUrl).crv,iscrv=getUrlVars(docUrl).iscrv;null==matchVer&&null!=ver&&(null!=crv?RedirToGivenVersionPage(ver,crv):RedirToGivenVersionPage(ver))}function RedirToGivenVersionPage(inputVer,crv){var curVerTag=$(".currentVersion"),bestVerIndex=-1,verDiff=-1,curVer=null,bestVersion=null;if(null!=curVerTag){var verText=curVerTag[0].innerHTML.toLowerCase();if((curVer="latest version"==verText?"latest":verText.replace("version ",""))==inputVer)return void console.log("0:"+curVer);bestVerIndex=-1,verDiff=GetVersionDiff(inputVer,curVer),bestVersion=curVer}var anchorVal="",curDocUrl=document.URL;if(-1!=curDocUrl.indexOf("#")){var urlAry=curDocUrl.split("#");2==urlAry.length&&(anchorVal="#"+urlAry[1])}var changeVer="",ifChangeVersion;null!=getUrlVars(document.URL).cVer&&(changeVer="&&cVer=true");var historyList=$(".otherVersions"),aTag,exp;if(null!=historyList)for(var listAry=historyList[0].getElementsByTagName("li"),i=0;i<listAry.length;i++){var tmpVerText=listAry[i].innerText,tmpVer=null,aTag,exp,tmpDiff,aTag,exp,tmpDiff;if(tmpVer="latest version"==tmpVerText?"latest":tmpVerText.replace("version ",""),crv)if(tmpVer==crv){if((aTag=$(listAry[i]).children("a")).length>0)return null!=(exp=new RegExp(/[?]+([^=]+)=/gi)).exec(aTag[0].href)?void window.location.replace(aTag[0].href+"&&ver="+inputVer+"&&matchVer=true&&crv="+crv+changeVer+anchorVal):void(null!=getUrlVars(document.URL).src?window.location.replace(aTag[0].href+"?src="+getUrlVars(document.URL).src+"&&ver="+inputVer+"&&matchVer=true&&crv="+crv+changeVer+anchorVal):window.location.replace(aTag[0].href+"?ver="+inputVer+"&&matchVer=true&&crv="+crv+changeVer+anchorVal))}else(tmpDiff=GetVersionDiff(crv,tmpVer))>=0&&(tmpDiff<verDiff||verDiff<0)&&(bestVerIndex=i,verDiff=tmpDiff,bestVersion=tmpVer);else if(tmpVer==inputVer){if((aTag=$(listAry[i]).children("a")).length>0)return null!=(exp=new RegExp(/[?]+([^=]+)=/gi)).exec(aTag[0].href)?void window.location.replace(aTag[0].href+"&&ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal):void(null!=getUrlVars(document.URL).src?window.location.replace(aTag[0].href+"?src="+getUrlVars(document.URL).src+"&&ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal):window.location.replace(aTag[0].href+"?ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal))}else(tmpDiff=GetVersionDiff(inputVer,tmpVer))>=0&&(tmpDiff<verDiff||verDiff<0)&&(bestVerIndex=i,verDiff=tmpDiff,bestVersion=tmpVer)}if(bestVerIndex>=0&&(aTag=$(listAry[bestVerIndex]).children("a")).length>0)return null!=(exp=new RegExp(/[?]+([^=]+)=/gi)).exec(aTag[0].href)?void window.location.replace(aTag[0].href+"&&ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal+(crv?"&&crv="+crv:"")):void(null!=getUrlVars(document.URL).src?window.location.replace(aTag[0].href+"?src="+getUrlVars(document.URL).src+"&&ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal+(crv?"&&crv="+crv:"")):window.location.replace(aTag[0].href+"?ver="+inputVer+"&&matchVer=true"+changeVer+anchorVal+(crv?"&&crv="+crv:"")))}function GetVersionDiff(inputVer,compareVer){if("latest"==compareVer)return 100;if(compareVer<inputVer)return-1;for(var inputChar=inputVer.split("."),compareChar=compareVer.split("."),diff=0,maxLength=Math.max(inputChar.length,compareChar.length),curWeight=1,i=0;i<maxLength;i++){var tmpInput=i<inputChar.length?inputChar[i]:0;if(isNaN(tmpInput)){diff+=curWeight;break}var tmpCompare=i<compareChar.length?compareChar[i]:0;if(isNaN(tmpCompare)){diff+=curWeight;break}var tmpDiff=tmpCompare-tmpInput;tmpDiff>=0?diff+=(curWeight/=10)*tmpDiff:(diff-=curWeight,diff+=(curWeight/=10)*(tmpDiff+10))}return diff}function addParam(aTag,verText){var hrefVal=aTag.href;if(""!=hrefVal){var exp=new RegExp(/[?&]ver=[^&^#]+/gi);if(null==exp.exec(hrefVal)){var verStr="";if(verStr=null!=(exp=new RegExp(/[?]+([^=]+)=/gi)).exec(hrefVal)?"&&ver="+verText:"?ver="+verText,-1!=hrefVal.indexOf("#")){var urlAry=hrefVal.split("#");2!=urlAry.length||("_blank"==aTag.target?window.open(urlAry[0]+verStr+"#"+urlAry[1]):window.location.href=urlAry[0]+verStr+"#"+urlAry[1])}else"_blank"==aTag.target?window.open(hrefVal+verStr):window.location.href=hrefVal+verStr}else"_blank"==aTag.target?window.open(hrefVal):window.location.href=hrefVal}}function changeVersion(liTag){var innertext=liTag.innerText.toLowerCase(),ver=null;ver="latest version"==innertext?"latest":innertext.replace("version ","");var curUrl=document.URL,srcVal=getUrlVars(curUrl).src,crv=getUrlVars(curUrl).crv,iscrv=getUrlVars(curUrl).iscrv,anchorVar=void 0;-1!=curUrl.indexOf("#")&&(anchorVar=curUrl.split("#").pop()),-1!=curUrl.indexOf("?")&&(curUrl=curUrl.substring(0,curUrl.indexOf("?"))),-1!=curUrl.indexOf("#")&&(curUrl=curUrl.substring(0,curUrl.indexOf("#"))),null==crv&&"true"!=iscrv||(crv=getCrvPageVersion(ver,curUrl)),curUrl=curUrl+"?ver="+ver+"&&cVer=true"+(null!=crv?"&&iscrv=true&&crv="+crv:""),null!=srcVal&&(curUrl=curUrl+"&&src="+srcVal),null!=anchorVar&&(curUrl=curUrl+"#"+anchorVar),window.location.href=curUrl}function getCrvPageVersion(ver,curUrl){if(version_tree_list&&version_tree_list.length>0)for(var i=0;i<version_tree_list.length;i++)if($(version_tree_list[i]).attr("id")=="version_tree_"+ver)for(var objs=$(version_tree_list[i]).find("li a"),oi=0;oi<objs.length;oi++){var objLink=objs[oi].href;if(-1!=objLink.indexOf("?")&&(objLink=objLink.substring(0,objLink.indexOf("?"))),-1!=objLink.indexOf("#")&&(objLink=objLink.substring(0,objLink.indexOf("#"))),objLink==curUrl)return crv=getUrlVars(objs[oi].href).crv,crv}}